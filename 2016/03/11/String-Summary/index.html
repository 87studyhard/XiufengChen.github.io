<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> SubString Summay · Xiufeng</title><meta name="description" content="SubString Summay - Xiufeng Chen"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sonnieme" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/XiufengChen" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">SubString Summay</h1><div class="post-info">Mar 11, 2016</div><div class="post-content"><p>This articale comes from a solution of LeetCode. <a href="https://leetcode.com/discuss/72701/here-10-line-template-that-can-solve-most-substring-problems" target="_blank" rel="external">Here is a 10-line template that can solve most ‘substring’ problems</a></p>
<p>I will first give the solution then show you the magic template.<br>The code of solving this problem is below. It might be the shortest among all solutions provided in Discuss.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function">string <span class="title">minWindow</span><span class="params">(string s, string t)</span> </span>&#123;</div><div class="line">       <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">map</span><span class="params">(<span class="number">128</span>,<span class="number">0</span>)</span></span>;</div><div class="line">       <span class="keyword">for</span>(auto c: t) map[c]++;</div><div class="line">       <span class="keyword">int</span> counter=t.size(), begin=<span class="number">0</span>, end=<span class="number">0</span>, d=INT_MAX, head=<span class="number">0</span>;</div><div class="line">       <span class="keyword">while</span>(end&lt;s.size())&#123;</div><div class="line">           <span class="keyword">if</span>(map[s[end++]]--&gt;<span class="number">0</span>) counter--; <span class="comment">//in t</span></div><div class="line">           <span class="keyword">while</span>(counter==<span class="number">0</span>)&#123; <span class="comment">//valid</span></div><div class="line">               <span class="keyword">if</span>(end-begin&lt;d)  d=end-(head=begin);</div><div class="line">               <span class="keyword">if</span>(map[s[begin++]]++==<span class="number">0</span>) counter++;  <span class="comment">//make it invalid</span></div><div class="line">           &#125;  </div><div class="line">       &#125;</div><div class="line">       <span class="keyword">return</span> d==INT_MAX? <span class="string">""</span>:s.substr(head, d);</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<p>Here comes the template.<br><a id="more"></a></p>
<p>For most substring problem, we are given a string and need to find a substring of it which satisfy some restrictions. A general way is to use a hashmap assisted with two pointers. The template is given below.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">findSubstring</span><span class="params">(string s)</span></span>&#123;</div><div class="line">       <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">map</span><span class="params">(<span class="number">128</span>,<span class="number">0</span>)</span></span>;</div><div class="line">       <span class="keyword">int</span> counter; <span class="comment">// check whether the substring is valid</span></div><div class="line">       <span class="keyword">int</span> begin=<span class="number">0</span>, end=<span class="number">0</span>; <span class="comment">//two pointers, one point to tail and one  head</span></div><div class="line">       <span class="keyword">int</span> d; <span class="comment">//the length of substring</span></div><div class="line"></div><div class="line">       <span class="keyword">for</span>() &#123; <span class="comment">/* initialize the hash map here */</span> &#125;</div><div class="line"></div><div class="line">       <span class="keyword">while</span>(end&lt;s.size())&#123;</div><div class="line"></div><div class="line">           <span class="keyword">if</span>(map[s[end++]]-- ?)&#123;  <span class="comment">/* modify counter here */</span> &#125;</div><div class="line"></div><div class="line">           <span class="keyword">while</span>(<span class="comment">/* counter condition */</span>)&#123; </div><div class="line"></div><div class="line">                <span class="comment">/* update d here if finding minimum*/</span></div><div class="line"></div><div class="line">               <span class="comment">//increase begin to make it invalid/valid again</span></div><div class="line"></div><div class="line">               <span class="keyword">if</span>(map[s[begin++]]++ ?)&#123; <span class="comment">/*modify counter here*/</span> &#125;</div><div class="line">           &#125;  </div><div class="line"></div><div class="line">           <span class="comment">/* update d here if finding maximum*/</span></div><div class="line">       &#125;</div><div class="line">       <span class="keyword">return</span> d;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>One thing needs to be mentioned is that when asked to find maximum substring, we should update maximum after the inner while loop to guarantee that the substring is valid. On the other hand, when asked to find minimum substring, we should update minimum inside the inner while loop.</p>
<ol>
<li>Use two pointers: start and end to represent a window.</li>
<li>Move end to find a valid window.</li>
<li>When a valid window is found, move start to find a smaller window.<br>To check if a window is valid, we use a map to store (char, count) for chars in t. And use counter for the number of chars of t to be found in s. The key part is m[s[end]]–;. We decrease count for each char in s. If it does not exist in t, the count will be negative.</li>
</ol>
<p>To really understand this algorithm, please see my code which is much clearer, because there is no code like if(map[s[end++]]++&gt;0) counter++;.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="function">string <span class="title">minWindow</span><span class="params">(string s, string t)</span> </span>&#123;</div><div class="line">	unordered_map&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt; m;</div><div class="line">	<span class="comment">// Statistic for count of char in t</span></div><div class="line">	<span class="keyword">for</span> (auto c : t) m[c]++;</div><div class="line">	<span class="comment">// counter represents the number of chars of t to be found in s.</span></div><div class="line">	size_t start = <span class="number">0</span>, end = <span class="number">0</span>, counter = t.size(), minStart = <span class="number">0</span>, minLen = INT_MAX;</div><div class="line">	size_t size = s.size();</div><div class="line"></div><div class="line">	<span class="comment">// Move end to find a valid window.</span></div><div class="line">	<span class="keyword">while</span> (end &lt; size) &#123;</div><div class="line">		<span class="comment">// If char in s exists in t, decrease counter</span></div><div class="line">		<span class="keyword">if</span> (m[s[end]] &gt; <span class="number">0</span>)</div><div class="line">			counter--;</div><div class="line">		<span class="comment">// Decrease m[s[end]]. If char does not exist in t, m[s[end]] will be negative.</span></div><div class="line">		m[s[end]]--;</div><div class="line">		end++;</div><div class="line">		<span class="comment">// When we found a valid window, move start to find smaller window.</span></div><div class="line">		<span class="keyword">while</span> (counter == <span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">if</span> (end - start &lt; minLen) &#123;</div><div class="line">				minStart = start;</div><div class="line">				minLen = end - start;</div><div class="line">			&#125;</div><div class="line">			m[s[start]]++;</div><div class="line">			<span class="comment">// When char exists in t, increase counter.</span></div><div class="line">			<span class="keyword">if</span> (m[s[start]] &gt; <span class="number">0</span>)</div><div class="line">				counter++;</div><div class="line">			start++;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (minLen != INT_MAX)</div><div class="line">		<span class="keyword">return</span> s.substr(minStart, minLen);</div><div class="line">	<span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">minWindow</span><span class="params">(String s, String t)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(s == <span class="keyword">null</span> || s.length() &lt; t.length() || s.length() == <span class="number">0</span>)&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">	&#125;</div><div class="line">	HashMap&lt;Character,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;Character,Integer&gt;();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">char</span> c : t.toCharArray())&#123;</div><div class="line">		<span class="keyword">if</span>(map.containsKey(c))&#123;</div><div class="line">			map.put(c,map.get(c)+<span class="number">1</span>);</div><div class="line">		&#125;<span class="keyword">else</span>&#123;</div><div class="line">			map.put(c,<span class="number">1</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> left = <span class="number">0</span>;</div><div class="line">	<span class="keyword">int</span> minLeft = <span class="number">0</span>;</div><div class="line">	<span class="keyword">int</span> minLen = s.length()+<span class="number">1</span>;</div><div class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> right = <span class="number">0</span>; right &lt; s.length(); right++)&#123;</div><div class="line">		<span class="keyword">if</span>(map.containsKey(s.charAt(right)))&#123;</div><div class="line">			map.put(s.charAt(right),map.get(s.charAt(right))-<span class="number">1</span>);</div><div class="line">			<span class="keyword">if</span>(map.get(s.charAt(right)) &gt;= <span class="number">0</span>)&#123;</div><div class="line">				count ++;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">while</span>(count == t.length())&#123;</div><div class="line">				<span class="keyword">if</span>(right-left+<span class="number">1</span> &lt; minLen)&#123;</div><div class="line">					minLeft = left;</div><div class="line">					minLen = right-left+<span class="number">1</span>;</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">if</span>(map.containsKey(s.charAt(left)))&#123;</div><div class="line">					map.put(s.charAt(left),map.get(s.charAt(left))+<span class="number">1</span>);</div><div class="line">					<span class="keyword">if</span>(map.get(s.charAt(left)) &gt; <span class="number">0</span>)&#123;</div><div class="line">						count --;</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">				left ++ ;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(minLen&gt;s.length())  </div><div class="line">	&#123;  </div><div class="line">		<span class="keyword">return</span> <span class="string">""</span>;  </div><div class="line">	&#125;  </div><div class="line"></div><div class="line">	<span class="keyword">return</span> s.substring(minLeft,minLeft+minLen);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The code of solving Longest Substring with At Most Two Distinct Characters is below:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lengthOfLongestSubstringTwoDistinct</span><span class="params">(string s)</span> </span>&#123;</div><div class="line">       <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">map</span><span class="params">(<span class="number">128</span>, <span class="number">0</span>)</span></span>;</div><div class="line">       <span class="keyword">int</span> counter=<span class="number">0</span>, begin=<span class="number">0</span>, end=<span class="number">0</span>, d=<span class="number">0</span>; </div><div class="line">       <span class="keyword">while</span>(end&lt;s.size())&#123;</div><div class="line">           <span class="keyword">if</span>(map[s[end++]]++==<span class="number">0</span>) counter++;</div><div class="line">           <span class="keyword">while</span>(counter&gt;<span class="number">2</span>) <span class="keyword">if</span>(map[s[begin++]]--==<span class="number">1</span>) counter--;</div><div class="line">           d=max(d, end-begin);</div><div class="line">       &#125;</div><div class="line">       <span class="keyword">return</span> d;</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<p>The code of solving Longest Substring Without Repeating Characters is below:</p>
<p>Update 01.04.2016, thanks @weiyi3 for advise.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(string s)</span> </span>&#123;</div><div class="line">       <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">map</span><span class="params">(<span class="number">128</span>,<span class="number">0</span>)</span></span>;</div><div class="line">       <span class="keyword">int</span> counter=<span class="number">0</span>, begin=<span class="number">0</span>, end=<span class="number">0</span>, d=<span class="number">0</span>; </div><div class="line">       <span class="keyword">while</span>(end&lt;s.size())&#123;</div><div class="line">           <span class="keyword">if</span>(map[s[end++]]++&gt;<span class="number">0</span>) counter++; </div><div class="line">           <span class="keyword">while</span>(counter&gt;<span class="number">0</span>) <span class="keyword">if</span>(map[s[begin++]]--&gt;<span class="number">1</span>) counter--;</div><div class="line">           d=max(d, end-begin); <span class="comment">//while valid, update d</span></div><div class="line">       &#125;</div><div class="line">       <span class="keyword">return</span> d;</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/03/12/Java-Summary/" class="prev">PREV</a><a href="/2016/03/04/jQuery-Questions/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://yoursite.com">Xiufeng Chen</a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>